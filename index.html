<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ソーシャルメディア分析</title>
    <style>
        body { font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1 { color: #333; }
        .report { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 8px; }
    </style>
</head>
<body>
    <h1>ソーシャルメディア分析ダッシュボード</h1>
    
    <div class="report">
        <h2>🚀 すぐに分析を実行</h2>
        <button onclick="runAnalysis()" style="background: #28a745; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; cursor: pointer; margin: 10px 0;">
            📊 分析を開始する
        </button>
        <p id="status" style="margin-top: 10px; font-weight: bold;"></p>
        <p><small>※ 初回は<a href="https://github.com/ryuto794/social-media-analytics/actions/workflows/daily_analysis.yml" target="_blank">GitHubでの認証</a>が必要な場合があります</small></p>
    </div>
    
    <script>
        async function runAnalysis() {
            const status = document.getElementById('status');
            status.innerHTML = '🔄 分析を開始しています...';
            
            try {
                // GitHub Personal Access Tokenが必要なため、代替手段を提供
                status.innerHTML = '⚠️ <a href="https://github.com/ryuto794/social-media-analytics/actions/workflows/daily_analysis.yml" target="_blank" style="color: #dc3545;">GitHubページで「Run workflow」をクリックしてください</a>';
                
                // 3秒後に自動でGitHubページを開く
                setTimeout(() => {
                    window.open('https://github.com/ryuto794/social-media-analytics/actions/workflows/daily_analysis.yml', '_blank');
                }, 3000);
                
            } catch (error) {
                status.innerHTML = '❌ エラーが発生しました。GitHubページから実行してください。';
            }
        }
        
        // ページロード時に最新の実行状況をチェック
        window.onload = function() {
            checkStatus();
        };
        
        async function checkStatus() {
            // 実行状況の表示（簡易版）
            const status = document.getElementById('status');
            status.innerHTML = '💡 下のボタンで分析を開始できます';
        }
    </script>
    
    <div class="report">
        <h2>📊 システム情報</h2>
        <p>🕕 <strong>6時間ごと</strong>に自動実行（0時、6時、12時、18時）</p>
        <p>🔄 緊急時は手動実行も可能</p>
        <p>📈 最新7日間のバイラルツイートを分析</p>
        <p>⚡ 実行時間: 約2-3分</p>
    </div>
    
    <div class="report">
        <h2>🎯 拾い上げ基準</h2>
        <p>• いいね3以上 または リツイート2以上 または 返信5以上</p>
        <p>• 山田太郎議員関連キーワードを優先</p>
        <p>• リポスト・ウォッチ候補として分野別に整理</p>
        <p>• 原文へのリンク付きで表示</p>
    </div>
</body>
</html>